<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Form Field Accessible Names Â· tollwerk</title>
        <link rel="stylesheet" href="a11y-bookmarklets.css"/>
    </head>
    <body>
        <main>
            <h1>Form Field Accessible Names</h1>
            <h2>Bookmarklet</h2>
            <p>
                <!-- inject:bookmarklet -->
                <a href="javascript:(()=%3E%7B%22use%20strict%22;var%20t,e=%7B585:(t,e)=%3E%7Bconst%20n=%7Bcolor:%22black%22,%22font-family%22:%22sans-serif%22,%22font-size%22:%22small%22,%22background-color%22:%22yellow%22,padding:%225px%208px%22,outline:%222px%20dotted%20#000%22,%22outline-offset%22:%22-3px%22,%22border-width%22:0,cursor:%22default%22,%22z-index%22:2147483647%7D,o=function()%7B0==document.querySelectorAll(%22.twa11y-toggle:checked%22).length&&(this.style.display=%22inline%22)%7D,i=function()%7B0==document.querySelectorAll(%22.twa11y-toggle:checked%22).length&&(this.style.display=%22none%22)%7D,s=function%20t(e,n,o=null)%7Blet%20i=Array.from((o%7C%7Cdocument).querySelectorAll(n)).reduce(((t,n)=%3E(e(n),t+1)),0);return%20Array.from((o%7C%7Cdocument).querySelectorAll(%22*%22)).forEach((o=%3E%7Bo.shadowRoot&&(i+=t(e,n,o.shadowRoot))%7D)),i%7D,l=function(t)%7Bconst%20e=%7B%7D;return%20t.split(%22;%22).forEach((t=%3E%7Bif(t.trim().length)%7Bconst%5Bn,o%5D=t.split(%22:%22);e%5Bn%5D=o.trim()%7D%7D)),e%7D;class%20r%7Bconstructor(t,e,n,o,i,s,l)%7Bthis.el=t,this.pos=e,this.str=(n%7C%7C%22%22).trim(),this.cls=%60twa11y%20$%7Bo%7C%7C%22%22%7D%60.trim(),this.stl=(i%7C%7C%22%22).trim(),this.icn=s%7C%7C%22%F0%9F%94%8D%22,this.opn=!!l,this.tgl=!1%7Dcreate(t,e)%7Bconst%20s=document.createElement(t?%22label%22:%22button%22);this.cls.trim().length&&(s.className=this.cls);const%20r=%7B...n,...l(this.stl)%7D;this.el.offsetParent&&this.el.offsetParent!==document.body&&(r.left=%60$%7Bthis.el.offsetLeft%7Dpx%60,r.top=%60$%7Bthis.el.offsetTop%7Dpx%60);const%20c=function(t)%7Bconst%20e=%5B%5D;for(const%20n%20in%20t)e.push(%60$%7Bn%7D:$%7Bt%5Bn%5D%7D%60);return%20e.join(%22;%22)%7D(r);if(c.length&&s.setAttribute(%22style%22,c),this.icn)if(t)s.innerHTML=%60$%7Bthis.icn%7D%20$%7Bthis.str%7D%60;else%7Bs.innerHTML=this.icn;const%20t=document.createElement(%22span%22);t.className=%22twa11y-details%22,t.innerHTML=this.str,t.style.color=%22inherit%22,t.style.marginLeft=%224px%22,s.appendChild(t),this.opn%7C%7C(t.style.display=%22none%22,s.addEventListener(%22focus%22,o.bind(t)),s.addEventListener(%22mouseover%22,o.bind(t)),s.addEventListener(%22blur%22,i.bind(t)),s.addEventListener(%22mouseout%22,i.bind(t)))%7Delse%20s.innerHTML=this.str;if(t&&e)%7Bs.appendChild(document.createTextNode(%22%20%E2%80%94%20show%20all%22));const%20t=document.createElement(%22input%22);t.className=%22twa11y-toggle%22,t.setAttribute(%22type%22,%22checkbox%22),t.style.margin=%220%200%200%204px%22,t.style.verticalAlign=%22baseline%22,t.addEventListener(%22change%22,(function()%7BArray.from(document.querySelectorAll(%22.twa11y-toggle%22)).forEach((t=%3E%7Bt!==this&&(t.checked=this.checked)%7D)),Array.from(document.querySelectorAll(%22.twa11y-details%22)).forEach((t=%3E%7Bt.style.display=this.checked?%22inline%22:%22none%22%7D))%7D)),s.appendChild(t)%7Delse%20s.onclick=t=%3E(console.log(this.el),!1);return%20t&&(s.className+=%22%20twa11y-glb%22,document.querySelectorAll(%22.twa11y-glb%22).forEach((t=%3Et.remove()))),0===this.pos?this.el.parentNode.insertBefore(s,this.el):1===this.pos?this.el.parentNode.insertBefore(s,this.el.nextSibling):2===this.pos?this.el.insertBefore(s,this.el.firstChild):3===this.pos&&this.el.appendChild(s),s%7D%7De.mc=function()%7Bs((t=%3Et.remove()),%22.twa11y%22)%7D,e.NR=s,e.kI=r,e.Qz=class%20extends%20r%7Bconstructor(t,e,n,o,i,s,l)%7Bsuper(t,e,n,o,%60$%7Bi%7C%7C%22%22%7D;background-color:lime;outline-color:#000%60,s%7C%7C%22%E2%9C%94%22,!!l)%7D%7D,e.Qf=class%20extends%20r%7Bconstructor(t,e,n,o,i,s,l)%7Bsuper(t,e,n,o,%60$%7Bi%7C%7C%22%22%7D;background-color:#EB0000;outline-color:#fff;color:#fff%60,s%7C%7C%22%E2%9C%96%22,!!l)%7D%7D,e.bI=class%20extends%20r%7Bconstructor(t,e,n,o,i,s,l)%7Bsuper(t,e,n,o,%60$%7Bi%7C%7C%22%22%7D;background-color:orange;outline-color:#000%60,s%7C%7C%22%F0%9F%92%80%22,!!l)%7D%7D%7D%7D,n=%7B%7D;t=function%20t(o)%7Bvar%20i=n%5Bo%5D;if(void%200!==i)return%20i.exports;var%20s=n%5Bo%5D=%7Bexports:%7B%7D%7D;return%20e%5Bo%5D(s,s.exports,t),s.exports%7D(585),function(e,n)%7B(0,t.mc)();const%20o=%5B'input:not(%5Btype=%22hidden%22%5D):not(%5Btype=%22submit%22%5D):not(%5Btype=%22reset%22%5D)',%22select%22,%22textarea%22%5D,i=%22position:absolute;line-height:100%25;z-index:2147483647%22;for(const%20t%20of%5B%22checkbox%22,%22combobox%22,%22listbox%22,%22menuitemcheckbox%22,%22menuitemradio%22,%22radio%22,%22searchbox%22,%22slider%22,%22spinbutton%22,%22switch%22,%22textbox%22%5D)o.push(%60%5Brole=%22$%7Bt%7D%22%5D%60);const%20s=function(t,e)%7Bconst%20n=%5Be%5D;return%20t.hasAttribute(%22autocomplete%22)&&n.push(%60%5Bautocomplete%5D:%20$%7Bt.getAttribute(%22autocomplete%22)%7D%60),n.join(%22%20%E2%8F%B5%20%22)%7D,l=(0,t.NR)((function(n)%7Btry%7B(function(n)%7Bif(function(n,o)%7Bfor(const%20l%20in%20o)if(n.hasAttribute(l))%7Bconst%20r=%5B%5D;throw%60$%7Bn.getAttribute(l)%7D%60.split(%22%20%22).forEach((t=%3E%7Bif(t.length)%7Bconst%20n=e.getElementById(t);if(n)%7Bconst%20t=n.textContent;t.trim().length&&r.push(t)%7D%7D%7D)),r.length?new%20o%5Bl%5D(n,0,s(n,%60%5B$%7Bl%7D%5D:%20$%7Br.join(%22%22)%7D%60),%22%22,i):new%20t.Qf(n,0,s(n,%60Empty%20%5B$%7Bl%7D%5D%60),%22labelSpan%22,i)%7D%7D(n,%7B%22aria-labelledby%22:t.Qz,%22aria-describedby%22:t.Qz%7D),function(t)%7Breturn%5B%22input%22,%22textarea%22,%22select%22%5D.indexOf(t.tagName.toLowerCase())%3E=0%7D(n)&&(function(n)%7Bconst%20o=%60$%7Bn.getAttribute(%22id%22)%7D%60.trim();if(o.length)%7Bconst%20l=e.querySelectorAll(%60label%5Bfor=%22$%7Bo%7D%22%5D%60);if(l.length)%7Bconst%20e=%5B%5D;throw%20Array.from(l).forEach((t=%3E%7Bt.textContent.trim().length&&e.push(t.textContent)%7D)),e.length?new%20t.Qz(n,0,s(n,%60label%5Bfor%5D:%20$%7Be.join(%22%22)%7D%60),%22%22,i):new%20t.Qf(n,0,s(n,%22Empty%20label%5Bfor%5D%22),%22labelSpan%22,i)%7D%7D%7D(n),function(e)%7Bconst%20n=e.closest(%22label%22);if(n)throw%20n.textContent.trim().length?new%20t.Qz(e,0,s(e,%60label:%20$%7Bn.textContent%7D%60),%22%22,i):new%20t.Qf(e,0,s(e,%22Empty%20label%22),%22labelSpan%22,i)%7D(n)),%22checkbox%22===n.getAttribute(%22role%22))%7Bconst%20e=n.textContent;if(e.trim().length)throw%20new%20t.Qz(n,0,s(n,%60(content):%20$%7Be%7D%60),%22%22,i)%7D!function(t,e)%7Bfor(const%20n%20in%20e)if(t.hasAttribute(n))%7Bconst%20o=%60$%7Bt.getAttribute(n)%7D%60;if(o.trim().length)throw%20new%20e%5Bn%5D(t,0,s(t,%60%5B$%7Bn%7D%5D:%20$%7Bo%7D%60),%22%22,i)%7D%7D(n,%7B%22aria-label%22:t.Qz,title:t.bI,placeholder:t.bI%7D)%7D)(n),new%20t.Qf(n,0,s(n,%22Empty%20accessible%20name%22),%22labelSpan%22,i).create()%7Dcatch(t)%7Bt.create()%7D%7D),o.join(%22,%22));new%20t.kI(e.body,2,l?%60Form%20fields%20found%20on%20page:%20$%7Bl%7D%60:%22No%20form%20fields%20found%20on%20page%22,null,%22position:fixed;top:0;left:0%22).create(!0,!!l)%7D(document)%7D)();">Form Field Names â“‰</a>
                <!-- endinject -->
            </p>
            <p class="hint">A bookmarklet is a small piece of (JavaScript) code that is run in the context of the
                currently visible
                web page.
                It comes as a bookmark that you typically add to your browser bookmarks for being able to run it
                repeatedly.
                In
                order to install this bookmarklet,
                please drag the link above to your browser bookmarks and call it from there. You can also click on the
                link to run the bookmarklet on this very page.</p>
            <h2>Purpose &amp; Notes</h2>
            <p>The purpose of this bookmarklet is to identify form fields on the page (native elements and elements
                with corresponding ARIA roles) and see whether they have a non-empty accessible name that can
                be passed to assistive technology. The bookmarklet loosely aligns with the <a
                    href="https://act-rules.github.io/rules/e086e5">ACT Rule e086e5</a> and its test cases. Shadow DOMs
                are examined recursively. As a side benefit, the value if the form field's <code>autocomplete</code>
                attribute is extracted as well (if present).</p>
            <p>The results are displayed visually on the page:</p>
            <ul>
                <li>A green bubble (âœ”) indicates a PASS (non-empty accessible name)</li>
                <li>A red bubble (âœ–) indicates a FAIL (empty accessible name)</li>
                <li>An orange bubble (ðŸ’€) indicates a PASS (non-empty accessible name), although your policy might
                    consider these suboptimal
                </li>
            </ul>
            <p>Click on any of the info
                bubbles to log the associated form field to the DevTools console.</p>
            <h2>Test bed</h2>
            <form>
                <div>
                    <label for="input-1">Input 1</label>
                    <input type="text" id="input-1">
                </div>
                <div>
                    <label for="input-2">Input 2.1</label>
                    <input type="text" id="input-2">
                    <label for="input-2">Input 2.2</label>
                </div>
                <div>
                    <label>
                        Input 3
                        <input type="text" id="input-3">
                    </label>
                </div>
                <div>
                    Input 4 without label
                    <input type="text" id="input-4">
                </div>
                <div>
                    <input type="text" aria-label="Input 5 with invisible name">
                </div>
                <div>
                    <span id="input-6">Input 6</span>
                    <input type="text" aria-labelledby="input-6">
                </div>
                <div>
                    <input type="text" title="Input 7 with title attribute">
                </div>
                <div>
                    <input type="text" placeholder="Input 8 with placeholder attribute">
                </div>
                <div>
                    <div aria-label="Input 9 with role=combobox" role="combobox" aria-disabled="true">Combobox</div>
                </div>
                <div>
                    <div role="checkbox">ARIA-Checkbox with text content</div>
                </div>
                <div>
                    <label for="input-11">Input 11 mit <code>autocomplete</code> attribute</label>
                    <input type="text" id="input-11" autocomplete="given-name">
                </div>
            </form>
        </main>
        <footer>
            <a href="index.html">Back to list</a>
        </footer>
    </body>
</html>
